# 已完成

# 待办

# 笔记

# 想法
- 进行下一个驱动的完成。
	- 使用设备树的 platform。
		- 主要讲的是相较于平台总线，需要平台设备和平台驱动。Linux 直接提出了一个设备树的想法。把所有的硬件信息都归总到设备树之中。这样写驱动的只需要写驱动就行了。
			- 这里实际上最好再多几个写平台设备和平台驱动的例子。让人感受到为什么会由设备树取代了平台设备。
	- 我现在这个虚拟机是没有配置过设备树和硬件文件的。所以，内部的系统和已经烧录到板子里的系统是不一样的。
	- 从 GPIO 到设备树这里，时间太久，容易遗忘之前的 GPIO 是如何设置的。最好在这里添加一些提示。关于 GPIO 的引脚的使用部分。
	- 设备树是和系统相关的，在做系统的时候，就得做好。而驱动是随时可以写的。
	- 在这里又得重新开始烧录系统，首先是最基础的系统的制作，然后是烧录文件的转移，之后是把通过设备树重新构建的 boot 下的系统文件复制进 sd 卡的 boot 文件下。
		- 这里需要注意的一点是，在转移烧录文件的时候，cp 完不要直接拔设备，需要等数据真的全部写入了 sd 卡再拔。
		- 系统登录不了。
			- 系统可以登入了。但是，有一个问题，如果是用自己的从 vitis 的导出的硬件数据，生成的系统文件是无法运行 platform device 部分的。
			- 修改后的三个文件是放在哪里？是修改 sd 卡本身的 Boot 还是文件内部的 boot？为什么改了之后，通过 sd 卡系统无法起来？
				- 先测试是否是板子读 sd 卡部分出现了问题。
					- 重新烧录一个 sd 卡，然后看看是否能跑起来。一种是用 rst_to_factory 去做的系统，这个部分无法跑起来。准备用另一种方式去试试，用一开始去做的系统来试试。如果可以，那么，就只要把 emmc 烧录文件复制到这个里面就可以了。
						- 如果能跑起来，那么就是之前改了 Boot 里面系统的原因了。
							- 那么 ，修改后的 3 个文件应该直接复制到 sd 卡内写文档的里面去。可是无论如何也不应该无法进入系统
						- 如果不能就得去找人了。
							- 还是无法进入系统。
							- 说是核心板没有亮，也就是 vivado 导出的系统文件有问题。从头开始制作系统了。 
			- 设备树这章有很问题，第一个是关于设备树，只能用样例的文件，自己编译的系统会出问题。
			- 第二个问题是驱动的部分实现有理解不清，从 probe 函数中，有一个问题。pdev 这个结构体的数据在设备树文件中并没有对应的找到。
	- 现在的问题是用样例中的 DTS 文件，不能生成可以供样例使用的系统文件。
		- 解决方式是通过样例中的系统文件，运行样例中的 demo 文件。
# 存档